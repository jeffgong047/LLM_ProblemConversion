When a finite set S of relations yields polynomial-time or NP-complete problems
In computational complexity theory, a branch of computer science, Schaefer's dichotomy theorem, proved by Thomas Jerome Schaefer, states necessary and sufficient conditions under which a finite set S of relations over the Boolean domain yields polynomial-time or NP-complete problems when the relations of S are used to constrain some of the propositional variables.[1]
It is called a dichotomy theorem because the complexity of the problem defined by S is either in P or NP-complete as opposed to one of the classes of intermediate complexity that is known to exist (assuming P ≠ NP) by Ladner's theorem.
Special cases of Schaefer's dichotomy theorem include the NP-completeness of SAT (the Boolean satisfiability problem) and its two popular variants 1-in-3 SAT and not-all-equal 3SAT (often denoted by NAE-3SAT). In fact, for these two variants of SAT, Schaefer's dichotomy theorem shows that their monotone versions (where negations of variables are not allowed) are also NP-complete.


Original presentation[edit]
Schaefer defines a decision problem that he calls the Generalized Satisfiability problem for S (denoted by SAT(S)), where S=R1,…,Rm={R_1,…,R_m} is a finite set of relations over propositional variables. An instance of the problem is an S-formula, i.e. a conjunction of constraints of the form Rj(xi1,…,xin)_j(x_i_1,…,x_i_n) where Rj∈S_j and the xij_i_j are propositional variables. The problem is to determine whether the given formula is satisfiable, in other words if the variables can be assigned values such that they satisfy all the constraints as given by the relations from S.
Schaefer identifies six classes of sets of Boolean relations for which SAT(S) is in P and proves that all other sets of relations generate an NP-complete problem. A finite set of relations S over the Boolean domain defines a polynomial time computable satisfiability problem if any one of the following conditions holds:

all relations which are not constantly false are true when all its arguments are true;
all relations which are not constantly false are true when all its arguments are false;
all relations are equivalent to a conjunction of binary clauses;
all relations are equivalent to a conjunction of Horn clauses;
all relations are equivalent to a conjunction of dual-Horn clauses;
all relations are equivalent to a conjunction of affine formulae. [2]
Otherwise, the problem SAT(S) is NP-complete.

Modern presentation[edit]
A modern, streamlined presentation of Schaefer's theorem is given in an expository paper by Hubie Chen.[3][4] In modern terms, the problem SAT(S) is viewed as a constraint satisfaction problem over the Boolean domain. In this area, it is standard to denote the set of relations by Γ and the decision problem defined by Γ as CSP(Γ).
This modern understanding uses algebra, in particular, universal algebra. For Schaefer's dichotomy theorem, the most important concept in universal algebra is that of a polymorphism. An operation f:Dm→D:D^m is a polymorphism of a relation R⊆Dk^k if, for any choice of m tuples (t11,…,t1k),…,(tm1,…,tmk)(t_11,…,t_1k),…,(t_m1,…,t_mk) from R, it holds that the tuple obtained from these m tuples by applying f coordinate-wise, i.e. (f(t11,…,tm1),…,f(t1k,…,tmk))(f(t_11,…,t_m1),…,f(t_1k,…,t_mk)), is in R. That is, an operation f is a polymorphism of R if R is closed under f: applying f to any tuples in R yields another tuple inside R. A set of relations Γ is said to have a polymorphism f if every relation in Γ has f as a polymorphism. This definition allows for the algebraic formulation of Schaefer's dichotomy theorem.
Let Γ be a finite constraint language over the Boolean domain. The problem CSP(Γ) is decidable in polynomial-time if Γ has one of the following six operations as a polymorphism:

the constant unary operation 0;
the constant unary operation 1;
the binary AND operation ∧;
the binary OR operation ∨;
the ternary majority operation Majority⁡(x,y,z)=(x∧y)∨(x∧z)∨(y∧z);Majority(x,y,z)=(x)∨(x)∨(y);
the ternary minority operation Minority⁡(x,y,z)=x⊕y⊕z.Minority(x,y,z)=x.
Otherwise, the problem CSP(Γ) is NP-complete.
In this formulation, it is easy to check if any of the tractability conditions hold.

Properties of Polymorphisms[edit]
Given a set Γ of relations, there is a surprisingly close connection between its polymorphisms and the computational complexity of CSP(Γ).
A relation R  is called primitive positive definable, or short pp-definable, from a
set Γ of relations if R(v1, ... , vk) ⇔ ∃x1 ... xm. C holds for some conjunction C of constraints from Γ and equations over the variables {v1,...,vk, x1,...,xm}.
For example, if Γ consists of the ternary relation nae(x,y,z) holding if x,y,z are not all equal, and R(x,y,z) is x∨y∨z, then R can be pp-defined by R(x,y,z) ⇔ ∃a. nae(0,x,a) ∧ nae(y,z,¬a); this reduction has been used to prove that NAE-3SAT is NP-complete.
The set of all relations which are pp-definable from Γ is denoted by ≪Γ≫.
If Γ' ⊆ ≪Γ≫ for some finite constraint sets Γ and Γ', then CSP(Γ') reduces to CSP(Γ).[5]
Given a set Γ of relations, Pol(Γ) denotes the set of polymorphisms of Γ.
Conversely, if O is a set of operations, then Inv(O) denotes the set of relations having all operations in O as a polymorphism.
Pol and Inv together build a Galois connection.
For any finite set Γ of relations over a finite domain, ≪Γ≫ = Inv(Pol(Γ)) holds, that is, the set of relations pp-definable from Γ can be derived from the polymorphisms of Γ.[6] Moreover, if Pol(Γ) ⊆ Pol(Γ') for two finite relation sets Γ and Γ', then Γ' ⊆ ≪Γ≫ and CSP(Γ') reduces to CSP(Γ). As a consequence, two relation sets having the same polymorphisms lead to the same computational complexity.[7]

Generalizations[edit]
The analysis was later fine-tuned: CSP(Γ) is either solvable in co-NLOGTIME, L-complete, NL-complete, ⊕L-complete, P-complete or NP-complete and given Γ, one can decide in polynomial time which of these cases holds.[8]
Schaefer's dichotomy theorem was recently generalized to a larger class of relations.[9]

Related work[edit]
If the problem is to count the number of solutions, which is denoted by #CSP(Γ), then a similar result by Creignou and Hermann holds.[10]  Let Γ be a finite constraint language over the Boolean domain. The problem #CSP(Γ) is computable in polynomial time if Γ has a Mal'tsev operation as a polymorphism. Otherwise, the problem #CSP(Γ) is #P-complete.  A Mal'tsev operation m is a ternary operation that satisfies m(x,y,y)=m(y,y,x)=x.(x,y,y)=m(y,y,x)=x. An example of a Mal'tsev operation is the Minority operation given in the modern, algebraic formulation of Schaefer's dichotomy theorem above. Thus, when Γ has the Minority operation as a polymorphism, it is not only possible to decide CSP(Γ) in polynomial time, but to compute #CSP(Γ) in polynomial time. There are a total of 4 Mal'tsev operations on Boolean variables, determined by the values of m(T,F,T)(T,F,T) and m(F,T,F)(F,T,F). An example of less symmetric one is given by m(x,y,z)=(x∧z)∨(¬y∧(x∨z))(x,y,z)=(x)∨(∧(x)). On another domains, such as groups, examples of Mal'tsev operations include x−y+z-y+z and xy−1z.^-1z.
For larger domains, even for a domain of size three, the existence of a Mal'tsev polymorphism for Γ is no longer a sufficient condition for the tractability of #CSP(Γ). However, the absence of a Mal'tsev polymorphism for Γ still implies the #P-hardness of #CSP(Γ).

See also[edit]
Max/min CSP/Ones classification theorems, a similar set of constraints for optimization problems
References[edit]


^ Schaefer, Thomas J. (1978). "The Complexity of Satisfiability Problems". STOC 1978. pp. 216–226. doi:10.1145/800133.804350. 

^ Schaefer (1978, p.218 left) defines an affine formula to be of the form x1 ⊕ ... ⊕ xn = c, where each xi is a variable, c is a constant, i.e. true or false, and "⊕" denotes XOR, i.e. addition in a Boolean ring.

^ Chen, Hubie (December 2009). "A Rendezvous of Logic, Complexity, and Algebra". ACM Computing Surveys. 42 (1): 1–32. arXiv:cs/0611018. doi:10.1145/1592451.1592453. S2CID 11975818.

^ Chen, Hubie (December 2006). "A Rendezvous of Logic, Complexity, and Algebra". SIGACT News (Logic Column). 37 (4): 85–114. arXiv:cs/0611018. doi:10.1145/1189056.1189076. S2CID 14130916.

^ Chen (2006), p.8, Proposition 3.9; Chen uses polynomial-time many-one reduction

^ Chen (2006), p.9, Theorem 3.13

^ Chen (2006), p.11, Theorem 3.15

^ Allender, Eric; Bauland, Michael; Immerman, Neil; Schnoor, Henning; Vollmer, Heribert (June 2009). "The complexity of satisfiability problems: Refining Schaefer's theorem" (PDF). Journal of Computer and System Sciences. 75 (4): 245–254. doi:10.1016/j.jcss.2008.11.001. Retrieved 2013-09-19.


^ Bodirsky, Manuel; Pinsker, Michael (2015). "Schaefer's Theorem for Graphs". J. ACM. 62 (3): 19:1–19:52. arXiv:1011.2894. doi:10.1145/2764899. S2CID 750401.

^ Creignou, Nadia; Hermann, Miki (1996). "Complexity of generalized satisfiability counting problems". Information and Computation. 125 (1): 1–12. doi:10.1006/inco.1996.0016. ISSN 0890-5401.





