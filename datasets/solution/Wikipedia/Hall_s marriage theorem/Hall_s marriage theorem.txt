Result in combinatorics and graph theory
In mathematics, Hall's marriage theorem, proved by Philip Hall (1935), is a theorem with two equivalent formulations. In each case, the theorem gives a necessary and sufficient condition for an object to exist:

The combinatorial formulation answers whether a finite collection of sets has a transversal—that is, whether an element can be chosen from each set without repetition. Hall's condition is that for any group of sets from the collection, the total unique elements they contain is at least as large as the number of sets in the group.
The graph theoretic formulation answers whether a finite bipartite graph has a perfect matching—that is, a way to match each vertex from one group uniquely to an adjacent vertex from the other group. Hall's condition is that any subset of vertices from one group has a neighbourhood of equal or greater size.

Combinatorial formulation[edit]
Statement[edit]
Let Fℱ be a finite family of sets (note that although Fℱ is not itself allowed to be infinite, the sets in it may be so, and Fℱ may contain the same set multiple times).[1] Let X be the union of all the sets in Fℱ, the set of elements that belong to at least one of its sets. A transversal for Fℱ is a subset of X that can be obtained by choosing a distinct element from each set in Fℱ. This concept can be formalized by defining a transversal to be the image of an injective function f:F→X:ℱ such that f(S)∈S(S) for each S∈F∈ℱ. An alternative term for transversal is system of distinct representatives.
The collection Fℱ satisfies the marriage condition when each subfamily of Fℱ contains at least as many distinct members as its number of sets. That is, for all G⊆F𝒢⊆ℱ,
|G|≤|⋃S∈GS|.|𝒢|≤|⋃_S∈𝒢S|.
If a transversal exists then the marriage condition must be true: the function f used to define the transversal maps G𝒢 to a subset of its union, of size equal to |G||𝒢|, so the whole union must be at least as large. Hall's theorem states that the converse is also true:


Hall's Marriage Theorem — A family Fℱ of finite sets has a transversal if and only if Fℱ satisfies the marriage condition.


Examples[edit]
example 1, marriage condition met
Example 1
Consider the family F=A1,A2,A3ℱ={A_1,A_2,A_3} with X=1,2,3,4,5={1,2,3,4,5} and A1=1,2,3A2=1,4,5A3=3,5.A_1   ={1,2,3}
A_2   ={1,4,5}
A_3   ={3,5}.
 The transversal 1,3,5{1,3,5} could be generated by the function that maps A1_1 to 11, A2_2 to 55, and A3_3 to 33, or alternatively by the function that maps A1_1 to 33, A2_2 to 11, and A3_3 to 55. There are other transversals, such as 2,1,3{2,1,3} and 1,4,5{1,4,5}. Because this family has at least one transversal, the marriage condition is met. Every subfamily of Fℱ has equal size to the set of representatives it is mapped to, which is less than or equal to the size of the union of the subfamily.
example 2, marriage condition violated
Example 2
Consider F=A1,A2,A3,A4ℱ={A_1,A_2,A_3,A_4} with A1=2,3,4,5A2=4,5A3=5A4=4.A_1   ={2,3,4,5}
A_2   ={4,5}
A_3   ={5}
A_4   ={4}.
 No valid transversal exists; the marriage condition is violated as is shown by the subfamily G=A2,A3,A4𝒢={A_2,A_3,A_4}. Here the number of sets in the subfamily is |G|=3|𝒢|=3, while the union of the three sets A2∪A3∪A4=4,5_2_3_4={4,5} contains only two elements.
A lower bound on the different number of transversals that a given finite family Fℱ of size n may have is obtained as follows: If each of the sets in Fℱ has cardinality ≥r, then the number of different transversals for Fℱ is either r!! if r≤n, or r(r−1)⋯(r−n+1)(r-1)⋯(r-n+1) if r>n>n.[2]
Recall that a transversal for a family Fℱ is an ordered sequence, so two different transversals could have exactly the same elements. For instance, the collection A1=1,2,3_1={1,2,3}, A2=1,2,5_2={1,2,5} has (1,2)(1,2) and (2,1)(2,1) as distinct transversals.

Graph theoretic formulation[edit]
blue edges represent a matching
Let G=(X,Y,E)=(X,Y,E) be a finite bipartite graph with bipartite sets X and Y and edge set E.  An X-perfect matching (also called an X-saturating matching) is a matching, a set of disjoint edges, which covers every vertex in X.
For a subset W of X, let NG(W)_G(W) denote the neighborhood of W in G, the set of all vertices in Y that are adjacent to at least one element of W.  The marriage theorem in this formulation states that there is an X-perfect matching if and only if for every subset W of X: |W|≤|NG(W)|.|W|≤|N_G(W)|. In other words, every subset W of X must have sufficiently many neighbors in Y.

Proof[edit]
Necessity[edit]
In an X-perfect matching M, every edge incident to W connects to a distinct neighbor of W in Y, so the number of these matched neighbors is at least |W||W|. The number of all neighbors of W is at least as large.

Sufficiency[edit]
Consider the contrapositive: if there is no X-perfect matching then Hall's condition must be violated for at least one W⊆X.  Let M be a maximum matching, and let u be any unmatched vertex in X. Consider all alternating paths (paths in G that alternately use edges outside and inside M) starting from u. Let W be the set of vertices in these paths that belong to X (including u itself) and let Z be the set of vertices in these paths that belong to Y. Then every vertex in Z is matched by M to a vertex in W, because an alternating path to an unmatched vertex could be used to increase the size of the matching by toggling whether each of its edges belongs to M or not. Therefore, the size of W is at least the number |Z||Z| of these matched neighbors of Z, plus one for the unmatched vertex u. That is, |W|≥|Z|+1|W|≥|Z|+1. However, for every vertex v∈W, every neighbor w of v belongs to Z: an alternating path to w can be found either by removing the matched edge vw from the alternating path to v, or by adding the unmatched edge vw to the alternating path to v. Therefore, Z=NG(W)=N_G(W) and |W|≥|NG(W)|+1|W|≥|N_G(W)|+1, showing that Hall's condition is violated.

Equivalence of the combinatorial formulation and the graph-theoretic formulation[edit]
A problem in the combinatorial formulation, defined by a finite family of finite sets Fℱ with union X can be translated into a bipartite graph G=(F,X,E)=(ℱ,X,E) where each edge connects a set in Fℱ to an element of that set. An Fℱ-perfect matching in this graph defines a system of unique representatives for Fℱ.  In the other direction, from any bipartite graph G=(X,Y,E)=(X,Y,E) one can define a finite family of sets, the family of neighborhoods of the vertices in X, such that any system of unique representatives for this family corresponds to an X-perfect matching in G. In this way, the combinatorial formulation for finite families of finite sets and the graph-theoretic formulation for finite graphs are equivalent.
The same equivalence extends to infinite families of finite sets and to certain infinite graphs. In this case, the condition that each set be finite corresponds to a condition that in the bipartite graph G=(X,Y,E)=(X,Y,E), every vertex in X should have finite degree. The degrees of the vertices in Y are not constrained.

Topological proof[edit]
Hall's theorem can be proved (non-constructively) based on Sperner's lemma.[3]: Thm.4.1, 4.2 

Applications[edit]
The theorem has many applications. For example, for a standard deck of cards, dealt into 13 piles of 4 cards each, the marriage theorem implies that it is possible to select one card from each pile so that the selected cards contain exactly one card of each rank (Ace, 2, 3, ..., Queen, King). More generally, any regular bipartite graph has a perfect matching.[4]: 2 
More abstractly, let G be a group, and H be a finite index subgroup of G. Then the marriage theorem can be used to show that there is a set T such that T is a transversal for both the set of left cosets and right cosets of H in G.[5]
The marriage theorem is used in the usual proofs of the fact that an r×n Latin rectangle can always be extended to an (r+1)×n(r+1) Latin rectangle when r<n<n, and so, ultimately to a Latin square.[6]

Logical equivalences[edit]
This theorem is part of a collection of remarkably powerful theorems in combinatorics, all of which are related to each other in an informal sense in that it is more straightforward to prove one of these theorems from another of them than from first principles. These include:

The König–Egerváry theorem (1931) (Dénes Kőnig, Jenő Egerváry)
König's theorem[7]
Menger's theorem (1927)
The max-flow min-cut theorem (Ford–Fulkerson algorithm)
The Birkhoff–Von Neumann theorem (1946)
Dilworth's theorem.
In particular,[8][9] there are simple proofs of the implications Dilworth's theorem ⇔ Hall's theorem ⇔ König–Egerváry theorem ⇔ König's theorem.

Infinite families[edit]
Marshall Hall Jr. variant[edit]
By examining Philip Hall's original proof carefully, Marshall Hall Jr. (no relation to Philip Hall) was able to tweak the result in a way that permitted the proof to work for infinite Fℱ.[10] This variant extends Philip Hall's Marriage theorem.
Suppose that F=Aii∈Iℱ={A_i}_i, is a (possibly infinite) family of finite sets that need not be distinct, then Fℱ has a transversal if and only if Fℱ satisfies the marriage condition.

Marriage condition does not extend[edit]
The following example, due to Marshall Hall Jr., shows that the marriage condition will not guarantee the existence of a transversal in an infinite family in which infinite sets are allowed.
Let Fℱ be the family, A0=N_0=ℕ, Ai=i−1_i={i-1} for i≥1≥1. The marriage condition holds for this infinite family, but no transversal can be constructed.[11]

Graph theoretic formulation of Marshall Hall's variant[edit]
The graph theoretic formulation of Marshal Hall's extension of the marriage theorem can be stated as follows: Given a bipartite graph with sides A and B, we say that a subset C of B is smaller than or equal in size to a subset D of A in the graph if there exists an injection in the graph (namely, using only edges of the graph) from C to D, and that it is strictly smaller in the graph if in addition there is no injection in the graph in the other direction. Note that omitting in the graph yields the ordinary notion of comparing cardinalities. The infinite marriage theorem states that there exists an injection from A to B in the graph, if and only if there is no subset C of A such that N(C) is strictly smaller than C in the graph.[12]
The more general problem of selecting a (not necessarily distinct) element from each of a collection of non-empty sets (without restriction as to the number of sets or the size of the sets) is permitted in general only if the axiom of choice is accepted.

Fractional matching variant[edit]
A fractional matching in a graph is an assignment of non-negative weights to each edge, such that the sum of weights adjacent to each vertex is at most 1. A fractional matching is X-perfect if the sum of weights adjacent to each vertex is exactly 1. The following are equivalent for a bipartite graph G = (X+Y, E):[13]

G admits an X-perfect matching.
G admits an X-perfect fractional matching. The implication follows directly from the fact that X-perfect matching is a special case of an X-perfect fractional matching, in which each weight is either 1 (if the edge is in the matching) or 0 (if it is not).
G satisfies Hall's marriage condition. The implication holds because, for each subset W of X, the sum of weights near vertices of W is |W|, so the edges adjacent to them are necessarily adjacent to at least |W| vertices of Y.
Quantitative variant[edit]
Main article: Deficiency (graph theory)
When Hall's condition does not hold, the original theorem tells us only that a perfect matching does not exist, but does not tell what is the largest matching that does exist. To learn this information, we need the notion of deficiency of a graph. Given a bipartite graph G = (X+Y, E), the deficiency of G w.r.t. X is the maximum, over all subsets W of X, of the difference |W| - |NG(W)|. The larger is the deficiency, the farther is the graph from satisfying Hall's condition. 
Using Hall's marriage theorem, it can be proved that, if the deficiency of a bipartite graph G is d, then G admits a matching of size at least |X|-d.

Generalizations[edit]
A generalization of Hall's theorem to general graphs (that are not necessarily bipartite) is provided by the Tutte theorem.
A generalization of Hall's theorem to bipartite hypergraphs is provided by various Hall-type theorems for hypergraphs.
Notes[edit]

^ Hall 1986, pg. 51. An alternative form of the marriage theorem applies to finite families of sets that can be infinite. However, the situation of having an infinite number of sets while allowing infinite sets is not allowed.

^ Reichmeider 1984, p.90

^ Haxell, P. (2011). "On Forming Committees". The American Mathematical Monthly. 118 (9): 777–788. doi:10.4169/amer.math.monthly.118.09.777. ISSN 0002-9890. JSTOR 10.4169/amer.math.monthly.118.09.777. S2CID 27202372.

^ DeVos, Matt. "Graph Theory" (PDF). Simon Fraser University.

^ Button, Jack; Chiodo, Maurice; Zeron-Medina Laris, Mariano (2014). "Coset Intersection Graphs for Groups". The American Mathematical Monthly. 121 (10): 922–26. arXiv:1304.6111. doi:10.4169/amer.math.monthly.121.10.922. S2CID 16417209. For H a finite index subgroup of G, the existence of a left-right transversal is well known, sometimes presented as an application of Hall's marriage theorem.

^ Hall, Marshall (1945). "An existence theorem for latin squares". Bull. Amer. Math. Soc. 51 (6): 387–388. doi:10.1090/S0002-9904-1945-08361-X.

^ The naming of this theorem is inconsistent in the literature. There is the result concerning matchings in bipartite graphs and its interpretation as a covering of (0,1)-matrices. Hall (1986) and van Lint & Wilson (1992) refer to the matrix form as König's theorem, while Roberts & Tesman (2009) refer to this version as the Kőnig-Egerváry theorem. The bipartite graph version is called Kőnig's theorem by Cameron (1994) and Roberts & Tesman (2009).

^ Equivalence of seven major theorems in combinatorics

^ Reichmeider 1984

^ Hall 1986, pg. 51

^ Hall 1986, pg. 51

^ Aharoni, Ron (February 1984). "König's Duality Theorem for Infinite Bipartite Graphs". Journal of the London Mathematical Society. s2-29 (1): 1–12. doi:10.1112/jlms/s2-29.1.1. ISSN 0024-6107.

^ "co.combinatorics - Fractional Matching version of Hall's Marriage theorem". MathOverflow. Retrieved 2020-06-29.


References[edit]
Brualdi, Richard A. (2010), Introductory Combinatorics, Upper Saddle River, NJ: Prentice-Hall/Pearson, ISBN 978-0-13-602040-0
Cameron, Peter J. (1994), Combinatorics: Topics, Techniques, Algorithms, Cambridge: Cambridge University Press, ISBN 978-0-521-45761-3
Hall, Marshall Jr. (1986), Combinatorial Theory (2nd ed.), New York: John Wiley & Sons, ISBN 978-0-471-09138-7
Hall, Philip (1935), "On Representatives of Subsets", J. London Math. Soc., 10 (1): 26–30, doi:10.1112/jlms/s1-10.37.26
Halmos, Paul R.; Vaughan, Herbert E. (1950), "The marriage problem", American Journal of Mathematics, 72 (1): 214–215, doi:10.2307/2372148, JSTOR 2372148, MR 0033330
Reichmeider, P.F. (1984), The Equivalence of Some Combinatorial Matching Theorems, Polygonal Publishing House, ISBN 978-0-936428-09-3
Roberts, Fred S.; Tesman, Barry (2009), Applied Combinatorics (2nd ed.), Boca Raton: CRC Press, ISBN 978-1-4200-9982-9
van Lint, J. H.; Wilson, R.M. (1992), A Course in Combinatorics, Cambridge: Cambridge University Press, ISBN 978-0-521-42260-4
External links[edit]
Marriage Theorem at cut-the-knot
Marriage Theorem and Algorithm at cut-the-knot
Hall's marriage theorem explained intuitively at Lucky's notes.
This article incorporates material from proof of Hall's marriage theorem on PlanetMath, which is licensed under the Creative Commons Attribution/Share-Alike License.




