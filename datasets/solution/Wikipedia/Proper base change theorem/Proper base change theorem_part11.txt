geometry: Derived algebraic geometry provides a means to drop the flatness assumption, provided that the pullback X′' is replaced by the homotopy pullback. In the easiest case when X, S, and S′' are affine (with the notation as above), the homotopy pullback is given by the derived tensor product X′=Spec⁡(B′⊗BLA)'=Spec(B'⊗_B^LA) Then, assuming that the schemes (or, more generally, derived schemes) involved are quasi-compact and quasi-separated, the natural transformation Lg∗Rf∗F→Rf∗′Lg′∗F^*Rf_*ℱ'_*Lg'^*ℱ is a quasi-isomorphism for any quasi-coherent sheaf, or more generally a complex of quasi-coherent sheaves.[9] The afore-mentioned flat base change result is in fact a special case since for g flat the homotopy pullback (which is locally given by a derived tensor product) agrees with the ordinary pullback (locally given by the underived tensor product), and since the pullback along the flat maps g and g' are automatically derived (i.e., Lg∗=g∗^*=g^*). The auxiliary assumptions related to the Tor-independence or Tor-amplitude in the preceding base change theorem also become unnecessary. In the above form, base change has been extended by Ben-Zvi, Francis & Nadler (2010) to the situation where X, S, and S' are (possibly derived) stacks, provided that the map f is a perfect map (which includes the case that f is a quasi-compact, quasi-separated map of schemes, but also includes more general stacks, such as the classifying stack BG of an algebraic group in characteristic zero). Variants and