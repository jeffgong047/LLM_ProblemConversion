derivation: The divergence theorem follows from the fact that if a volume V is partitioned into separate parts, the flux out of the original volume is equal to the sum of the flux out of each component volume.[6][7] This is true despite the fact that the new subvolumes have surfaces that were not part of the original volume's surface, because these surfaces are just partitions between two of the subvolumes and the flux through them just passes from one volume to the other and so cancels out when the flux out of the subvolumes is summed. A volume divided into two subvolumes. At right the two subvolumes are separated to show the flux out of the different surfaces. See the diagram. A closed, bounded volume V is divided into two volumes V1 and V2 by a surface S3 (green). The flux Φ(Vi) out of each component region Vi is equal to the sum of the flux through its two faces, so the sum of the flux out of the two parts is Φ(V1)+Φ(V2)=Φ1+Φ31+Φ2+Φ32Φ(V_1)+Φ(V_2)=Φ_1+Φ_31+Φ_2+Φ_32 where Φ1 and Φ2 are the flux out of surfaces S1 and S2, Φ31 is the flux through S3 out of volume 1, and Φ32 is the flux through S3 out of volume 2. The point is that surface S3 is part of the surface of both volumes. The "outward" direction of the normal vector n^𝐧̂ is opposite for each volume, so the flux out of one through S3 is equal to the negative of the flux out of the other Φ31=∬S3F⋅n^dS=−∬S3F⋅(−n^)dS=−Φ32Φ_31=∬_S_3𝐅·𝐧̂ dS=-∬_S_3𝐅·(-𝐧̂) dS=-Φ_32 so these two fluxes cancel in the sum. Therefore Φ(V1)+Φ(V2)=Φ1+Φ2Φ(V_1)+Φ(V_2)=Φ_1+Φ_2 Since the union of surfaces S1 and S2 is S Φ(V1)+Φ(V2)=Φ(V)Φ(V_1)+Φ(V_2)=Φ(V) The volume can be divided into any number of subvolumes and the flux out of V is equal to the sum of the flux out of each subvolume, because the flux through the green surfaces cancels out in the sum. In (b) the volumes are shown separated slightly, illustrating that each green partition is part of the boundary of two adjacent volumes This principle applies to a volume divided into any number of parts, as shown in the diagram.[7] Since the integral over each internal partition (green surfaces) appears with opposite signs in the flux of the two adjacent volumes they cancel out, and the only contribution to the flux is the integral over the external surfaces (grey). Since the external surfaces of all the component volumes equal the original surface. Φ(V)=∑Vi⊂VΦ(Vi)Φ(V)=∑_V_iΦ(V_i) As the volume is subdivided into smaller parts, the ratio of the flux Φ(Vi)Φ(V_i) out of each volume to the volume |Vi||V_i| approaches div⁡Fdiv𝐅 The flux Φ out of each volume is the surface integral of the vector field F(x) over the surface ∬S(V)F⋅n^dS=∑Vi⊂V∬S(Vi)F⋅n^dS∬_S(V)𝐅·𝐧̂ dS=∑_V_i∬_S(V_i)𝐅·𝐧̂ dS The goal is to divide the original volume into infinitely many infinitesimal volumes. As the volume is divided into smaller and smaller parts, the surface integral on the right, the flux out of each subvolume, approaches zero because the surface area S(Vi) approaches zero. However, from the definition of divergence, the ratio of flux to volume, Φ(Vi)|Vi|=1|Vi|∬S(Vi)F⋅n^dSΦ(V_i)/|V_i|=1/|V_i|∬_S(V_i)𝐅·𝐧̂ dS, the part in parentheses below, does not in general vanish but approaches the divergence div F as the volume approaches zero.[7] ∬S(V)F⋅n^dS=∑Vi⊂V(1|Vi|∬S(Vi)F⋅n^dS)|Vi|∬_S(V)𝐅·𝐧̂ dS=∑_V_i(1/|V_i|∬_S(V_i)𝐅·𝐧̂ dS)|V_i| As long as the vector field F(x) has continuous derivatives, the sum above holds even in the limit when the volume is divided into infinitely small increments ∬S(V)F⋅n^dS=lim|Vi|→0∑Vi⊂V(1|Vi|∬S(Vi)F⋅n^dS)|Vi|∬_S(V)𝐅·𝐧̂ dS=lim_|V_i|→0∑_V_i(1/|V_i|∬_S(V_i)𝐅·𝐧̂ dS)|V_i| As |Vi||V_i| approaches zero volume, it becomes the infinitesimal dV, the part in parentheses becomes the divergence, and the sum becomes a volume integral over V ∬S(V)F⋅n^dS=∭Vdiv⁡FdV ∬_S(V)𝐅·𝐧̂ dS=∭_Vdiv𝐅 dV Since this derivation is coordinate free, it shows that the divergence does not depend on the coordinates used.