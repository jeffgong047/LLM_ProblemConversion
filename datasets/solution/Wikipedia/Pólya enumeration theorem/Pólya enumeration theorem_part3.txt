version: In the more general and more important version of the theorem, the colors are also weighted in one or more ways, and there could be an infinite number of colors provided that the set of colors has a generating function with finite coefficients. In the univariate case, suppose that f(t)=f0+f1t+f2t2+⋯(t)=f_0+f_1t+f_2t^2+⋯ is the generating function of the set of colors, so that there are fw colors of weight w for each integer w ≥ 0. In the multivariate case, the weight of each color is a vector of integers and there is a generating function f(t1, t2, ...) that tabulates the number of colors with each given vector of weights. The enumeration theorem employs another multivariate generating function called the cycle index: ZG(t1,t2,…,tn)=1|G|∑g∈Gt1c1(g)t2c2(g)⋯tncn(g)_G(t_1,t_2,…,t_n)=1/|G|∑_gt_1^c_1(g)t_2^c_2(g)_n^c_n(g) where n is the number of elements of X and ck(g) is the number of k-cycles of the group element g as a permutation of X. A colored arrangement is an orbit of the action of G on the set YX (where Y is the set of colors and YX denotes the set of all functions φ: X→Y). The weight of such an arrangement is defined as the sum of the weights of φ(x) over all x in X. The theorem states that the generating function F of the number of colored arrangements by weight is given by: F(t)=ZG(f(t),f(t2),f(t3),…,f(tn))(t)=Z_G(f(t),f(t^2),f(t^3),…,f(t^n)) or in the multivariate case: F(t1,t2,…)=ZG(f(t1,t2,…),f(t12,t22,…),f(t13,t23,…),…,f(t1n,t2n,…)).(t_1,t_2,…)=Z_G(f(t_1,t_2,…),f(t_1^2,t_2^2,…),f(t_1^3,t_2^3,…),…,f(t_1^n,t_2^n,…)). To reduce to the simplified version given earlier, if there are m colors and all have weight 0, then f(t) = m and |YX/G|=F(0)=ZG(m,m,…,m)=1|G|∑g∈Gmc(g).|Y^X/G|=F(0)=Z_G(m,m,…,m)=1/|G|∑_gm^c(g). In the celebrated application of counting trees (see below) and acyclic molecules, an arrangement of "colored beads" is actually an arrangement of arrangements, such as branches of a rooted tree. Thus the generating function f for the colors is derived from the generating function F for arrangements, and the Pólya enumeration theorem becomes a recursive formula.